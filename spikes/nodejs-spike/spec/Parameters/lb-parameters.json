{
    "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "loadBalancerSettings": {
            "value": {
                "name": "bb-dev-biz-lb",
                "frontendIPConfigurations": [
                    {
                        "name": "bb-dev-biz-lbfe1",
                        "loadBalancerType": "public",
                        "domainNameLabel": "rstest112211"
                    },
                    {
                        "name": "bb-dev-biz-lbfe2",
                        "loadBalancerType": "internal",
                        "domainNameLabel": "tests",
                        "internalLoadBalancerSettings": {
                            "privateIPAddress": "10.0.2.100",
                            "subnetName": "biz"
                        }
                    }
                ],
                "loadBalancingRules": [
                    {
                        "name": "lbr1",
                        "frontendPort": 80,
                        "backendPort": 80,
                        "protocol": "Tcp",
                        "backendPoolName": "lb-bep1",
                        "frontendIPConfigurationName": "bb-dev-biz-lbfe1",
                        "enableFloatingIP": false,
                        "probeName": "lbp1"
                    },
                    {
                        "name": "lbr2",
                        "frontendPort": 443,
                        "backendPort": 443,
                        "protocol": "Tcp",
                        "backendPoolName": "lb-bep2",
                        "frontendIPConfigurationName": "bb-dev-biz-lbfe2",
                        "enableFloatingIP": false,
                        "probeName": "lbp2"
                    }
                ],
                "probes": [
                    {
                        "name": "lbp1",
                        "port": 80,
                        "protocol": "Http",
                        "requestPath": "/"
                    },
                    {
                        "name": "lbp2",
                        "port": 50000,
                        "protocol": "TCP",
                        "requestPath": "/"
                    }
                ],
                "backendPools": [
                    {
                        "name": "lb-bep1",
                        "nics": {
                            "vmIndex": [
                                0,
                                1
                            ],
                            "nicIndex": 0
                        }
                    },
                    {
                        "name": "lb-bep2",
                        "nics": {
                            "vmIndex": [
                                0,
                                1
                            ],
                            "nicIndex": 1
                        }
                    }
                ],
                "inboundNatRules": [
                    {
                        "name": "nat1",
                        "frontendIPConfigurationName": "lbfe1",
                        "startingFrontendPort": 50001,
                        "backendPort": 3389,
                        "enableFloatingIP": false,
                        "protocol": "Tcp",
                        "idleTimeoutInMinutes": 4,
                        "nics": {
                            "vmIndex": [
                                0,
                                1
                            ],
                            "nicIndex": 0
                        }
                    },
                    {
                        "name": "nat2",
                        "frontendIPConfigurationName": "lbfe2",
                        "frontendPort": 25,
                        "enableFloatingIP": true,
                        "protocol": "Tcp",
                        "idleTimeoutInMinutes": 4,
                        "nics": {
                            "vmIndex": [
                                1
                            ],
                            "nicIndex": 1
                        }
                    }
                ],
                "virtualNetwork": {
                    "name": "test-vnet"
                },
                "backendVirtualMachinesSettings": {
                    "vmCount": 2,
                    "namePrefix": "test",
                    "size": "Standard_DS2",
                    "computerNamePrefix": "test",
                    "adminUsername": "testadminuser",
                    "adminPassword": "testPassw0rd111",
                    "osAuthenticationType": "password",
                    "storageAccounts": {
                        "count": 1,
                        "managed": false
                    },
                    "diagnosticStorageAccounts": {
                        "count": 1
                    },
                    "nics": [
                        {
                            "isPublic": true,
                            "subnetName": "web",
                            "privateIPAllocationMethod": "Static",
                            "startingIPAddress": "10.0.1.240",
                            "isPrimary": true,
                            "dnsServers": [
                                "10.0.1.240",
                                "10.0.1.242"
                            ]
                        },
                        {
                            "isPrimary": false,
                            "subnetName": "biz",
                            "privateIPAllocationMethod": "Dynamic"
                        }
                    ],
                    "osDisk": {
                        "osType": "linux"
                    },
                    "dataDisks": {
                        "count": 1,
                        "properties": {
                            "diskSizeGB": 127
                        }
                    },
                    "availabilitySet": {
                        "useExistingAvailabilitySet": false,
                        "name": "test-as"
                    }
                }
            }
        },
        "buildingBlockSettings": {
            "value": {
                "resourceGroupName": "rs-test1-rg",
                "subscriptionId": "3b518fac-e5c8-4f59-8ed5-d70b626f8e10"
            }
        }
    }
}